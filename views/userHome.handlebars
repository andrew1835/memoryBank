<!-- Dropdown Structure -->
<ul id="dropdown1" class="dropdown-content">
    <li><a id="history" href="/history">History</a></li>
    <li><a id="feed" href="#!">Feed</a></li>
    <li><a id="signout" href="/">Logout</a></li>
</ul>
<nav>
    <div class="nav-wrapper">
        <a href="/home" class="brand-logo"> <i class="material-icons">home</i></a>
         
        <ul class="right hide-on-med-and-down">

            <!-- Dropdown Trigger -->
            <li>
                <a class="dropdown-trigger" href="/home" data-target="dropdown1">
                    <i class="material-icons right">dehaze</i></a>
            </li>
        </ul>
    </div>
</nav>

<div class="container welcomeContainer" >
<div class="row">
    <div class="col s10">
<h1 id="welcomeH1">Welcome {{users.first_name}}</h1>
    </div>
    <div class="col s2">
<div class="row">
    <div class="col s12">
<div class="switch">
    <label>
      
      <input type="checkbox">
      <span class="lever"></span>
    
    </label>
    </div>
    </div>
</div>

    </div>
</div>
    

 

  
    <div id="hororscopeForDay">
        <h3>{{users.sign}} </h3>
        <p>{{histories.description}}</p>
    </div>

    <div id="otherLuckyInfo">
        <p>Lucky Color: {{histories.color}}</p>
        <p>Lucky Number: {{histories.lucky_number}}</p>
        <p>Lucky Time: {{histories.lucky_time}}</p>
        <p>Sign Compatibility: {{histories.compatibility}}</p>
        <p>Mood: {{histories.mood}}</p>
        
    </div>
    <br>
    <br>
    <br>

    <div id="uploadArea">
        {{!-- <a class="waves-effect waves-light btn" id="memory">Upload Memory Picture</a> --}}
        <button id="upload_widget" class="cloudinary-button">Upload files</button>

        <script src="https://widget.cloudinary.com/v2.0/global/all.js" type="text/javascript"></script>

        <script type="text/javascript">
            var myWidget = cloudinary.createUploadWidget({
                cloudName: 'dl5nddb9b',
                uploadPreset: 'awfcnrld'
            }, (error, result) => {
                if (!error && result && result.event === "success") {
                    console.log('Done! Here is the image info: ', result.info.secure_url);

                    //Cloudinary sends a post request to the /image route to the backend containg a string of data containg the image url to cloudinary
                    $.post("/api/image", {
                        memory_image: result.info.secure_url
                    })


                        .then((data) => {
                            console.log(data, "saved image")
                            location.reload()
                        })
                        .fail((err) => {
                            console.log(err)
                        })



                }
            }
            )

            document.getElementById("upload_widget").addEventListener("click", function () {
                myWidget.open();
            }, false);




        </script>

    </div>
    <p>{{histories.memory_image}}</p>
        <div class="row">
      <form class="col s12">
        
        <div class="row">
          <div class="input-field col s12">
            <textarea id="journal_entry" class="materialize-textarea" data-length="300"></textarea>
            <label for="textarea2">Daily Entry</label>
          </div>
        </div>
        <div id="submitButton">
        <a class="waves-effect waves-light btn" id="submit">Submit</a>
    </div>
      </form>
    </div>
     
    
</div>